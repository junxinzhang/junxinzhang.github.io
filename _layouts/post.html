---
layout: default
---
{% assign author = site.authors[page.author] %}

<!-- Reading Progress Bar -->
<div class="reading-progress-bar" id="readingProgress"></div>

<div class="container">

<!-- Breadcrumb Navigation -->
<nav aria-label="breadcrumb" class="mt-3">
    <ol class="breadcrumb bg-transparent p-0 mb-2 small">
        <li class="breadcrumb-item"><a href="{{site.baseurl}}/" class="text-muted"><span data-i18n="nav.home">Home</span></a></li>
        {% if page.categories.size > 0 %}
        <li class="breadcrumb-item"><a href="{{site.baseurl}}/categories.html#{{ page.categories | first | downcase }}" class="text-muted">{{ page.categories | first }}</a></li>
        {% endif %}
        <li class="breadcrumb-item active text-truncate" aria-current="page" style="max-width: 300px;">{{ page.title }}</li>
    </ol>
</nav>

<div class="jumbotron jumbotron-fluid mb-3 pl-0 pt-0 pb-0 bg-white position-relative">
		<div class="h-100 tofront">
			<div class="row {% if page.image %} justify-content-between {% else %} justify-content-center {% endif %}">
				<div class="{% if page.image %} col-md-6 {% else %} col-md-8 {% endif %} pr-0 pr-md-4 pt-4 pb-4 align-self-center">
					<p class="text-uppercase font-weight-bold">
                        <span class="catlist">
						{% for category in page.categories %}
                          <a class="sscroll text-danger" href="{{site.baseurl}}/categories.html#{{ category | downcase }}">{{ category | downcase }}</a><span class="sep">, </span>
                        {% endfor %}
                        </span>
					</p>
					<h1 class="display-4 mb-4 article-headline">{{ page.title }}</h1>
					<span class="text-muted d-block mt-1">{{ page.date | date: '%b %d, %Y' }} · {% include meta-read-time.html %}</span>
				</div>
                {% if page.image %}
				<div class="col-md-6 pr-0 align-self-center">
					{% include responsive-image.html src=page.image alt=page.title class="rounded w-100" width="600" height="400" fetchpriority="high" %}
				</div>
                {% endif %}
			</div>
		</div>
	</div>
</div>





<div class="container-lg pt-4 pb-4">
	<div class="row justify-content-center">
        
        
        <!-- Share -->
		<div class="col-lg-2 pr-4 mb-4 col-md-12">
			<div class="sticky-top sticky-top-offset text-center">
				<div class="text-muted" data-i18n="post.share">
					Share
				</div>
				<div class="share d-inline-block">
					<!-- AddToAny BEGIN -->
					<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
						<a class="a2a_dd" href="https://www.addtoany.com/share"></a>
						<a class="a2a_button_facebook"></a>
						<a class="a2a_button_twitter"></a>
					</div>
					<script async src="https://static.addtoany.com/menu/page.js"></script>
					<!-- AddToAny END -->
				</div>
			</div>
		</div>
        
        
		<div class="col-md-12 col-lg-8">
            
            <!-- Article -->
			<article class="article-post">                
			{{ content }}                
			</article>
			
			<!-- Tags -->
			<div class="mb-4">
				<span class="taglist">
				{% for tag in page.tags %}
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="{{site.baseurl}}/tags.html#{{ tag | downcase }}">{{ tag | downcase }}</a>
				{% endfor %}
				</span>
			</div>

            <!-- donate -->
			{% include donate.html %}

            <!-- Comments -->
            {% if page.comments != false %}
                {% include comments.html %}
            {% endif %}
            
		</div>
        
        
	</div>
</div>


<!-- Related Posts -->
<div class="container mb-5">
    <div class="row">
        <div class="col-12">
            <h4 class="font-weight-bold spanborder"><span data-i18n="post.related_posts">Related Posts</span></h4>
        </div>
    </div>
    <div class="row">
        {% assign maxRelated = 3 %}
        {% assign minCommonTags = 1 %}
        {% assign maxRelatedCounter = 0 %}
        {% for post in site.posts %}
            {% assign sameTagCount = 0 %}
            {% assign commonTags = '' %}
            {% for tag in post.tags %}
                {% if post.url != page.url %}
                    {% if page.tags contains tag %}
                        {% assign sameTagCount = sameTagCount | plus: 1 %}
                    {% endif %}
                {% endif %}
            {% endfor %}
            {% if sameTagCount >= minCommonTags %}
                {% if maxRelatedCounter < maxRelated %}
                    {% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 border-0 rounded shadow-sm hover-effect">
                            {% if post.image %}
                            <a href="{{site.baseurl}}{{post.url}}">
                                <div class="card-img-top" style="background-image: url({% if post.image contains '://' %}{{ post.image }}{% else %}{{site.baseurl}}/{{ post.image}}{% endif %}); height: 140px; background-size: cover; background-position: center;"></div>
                            </a>
                            {% endif %}
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">
                                    <a class="text-dark" href="{{site.baseurl}}{{post.url}}">{{ post.title }}</a>
                                </h5>
                                {% assign words = post.content | strip_html | number_of_words %}
                                {% assign read_time = words | divided_by: 300 | at_least: 1 %}
                                <div class="mt-auto">
                                    <small class="text-muted">{{ post.date | date: '%Y年%m月%d日' }} · {{ read_time }} 分钟</small>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endif %}
        {% endfor %}
        {% if maxRelatedCounter == 0 %}
            {% for post in site.posts limit:3 %}
                {% if post.url != page.url %}
                <div class="col-md-4 mb-4">
                    <div class="card h-100 border-0 rounded shadow-sm hover-effect">
                        {% if post.image %}
                        <a href="{{site.baseurl}}{{post.url}}">
                            <div class="card-img-top" style="background-image: url({% if post.image contains '://' %}{{ post.image }}{% else %}{{site.baseurl}}/{{ post.image}}{% endif %}); height: 140px; background-size: cover; background-position: center;"></div>
                        </a>
                        {% endif %}
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">
                                <a class="text-dark" href="{{site.baseurl}}{{post.url}}">{{ post.title }}</a>
                            </h5>
                            {% assign words = post.content | strip_html | number_of_words %}
                            {% assign read_time = words | divided_by: 300 | at_least: 1 %}
                            <div class="mt-auto">
                                <small class="text-muted">{{ post.date | date: '%Y年%m月%d日' }} · {{ read_time }} 分钟</small>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    </div>
</div>

<!-- Aletbar Prev/Next -->
<div class="alertbar">
    <div class="container">
        <div class="row prevnextlinks small font-weight-bold">
          {% if page.previous.url %}
            <div class="col-md-6 rightborder pl-0">
                <a class="text-dark" href="{{ site.baseurl }}{{ page.previous.url }}">{% if page.previous.image %} <img height="30" width="45" class="mr-1" src="{{site.baseurl}}/{{page.previous.image}}" alt="{{ page.previous.title | escape }}" loading="lazy"> {% endif %} {{page.previous.title}}</a>
            </div>
          {% endif %}
          {% if page.next.url %}
            <div class="col-md-6 text-right pr-0">
                <a class="text-dark" href="{{ site.baseurl }}{{ page.next.url }}"> {{page.next.title}} {% if page.next.image %} <img height="30" width="45" class="ml-1" src="{{site.baseurl}}/{{page.next.image}}" alt="{{ page.next.title | escape }}" loading="lazy"> {% endif %}</a>
            </div>
          {% endif %}
        </div>
    </div>
</div>

<!-- Reading Progress Bar Styles -->
<style>
.reading-progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    width: 0%;
    height: 3px;
    background: linear-gradient(90deg, #007bff, #00d4ff);
    z-index: 9999;
    transition: width 0.1s ease;
}
.breadcrumb-item + .breadcrumb-item::before {
    content: "›";
}
</style>

<!-- Reading Progress Bar Script - Optimized with RAF -->
<script>
$(document).ready(function() {
    var progressBar = document.getElementById('readingProgress');
    var article = document.querySelector('article.article-post');

    if (article && progressBar) {
        var ticking = false;
        var articleTop = article.offsetTop;
        var articleHeight = article.offsetHeight;
        var windowHeight = window.innerHeight;
        var scrollStart = articleTop - windowHeight / 2;
        var scrollEnd = articleTop + articleHeight - windowHeight / 2;

        function updateProgress() {
            var scrollTop = window.pageYOffset;
            var progress;
            if (scrollTop < scrollStart) {
                progress = 0;
            } else if (scrollTop > scrollEnd) {
                progress = 100;
            } else {
                progress = ((scrollTop - scrollStart) / (scrollEnd - scrollStart)) * 100;
            }
            progressBar.style.width = progress + '%';
            ticking = false;
        }

        window.addEventListener('scroll', function() {
            if (!ticking) {
                requestAnimationFrame(updateProgress);
                ticking = true;
            }
        }, {passive: true});
    }
});
</script>
