<!DOCTYPE html>
{% include i18n.html %}
{% assign lang_code_map = "en:en,zh-hans:zh-CN,zh-hant:zh-TW,ja:ja,ko:ko,de:de,fr:fr,it:it,es:es,pt:pt,hi:hi" | split: "," %}
{% assign html_lang = "zh-CN" %}
{% for mapping in lang_code_map %}
    {% assign parts = mapping | split: ":" %}
    {% if parts[0] == current_lang %}
        {% assign html_lang = parts[1] %}
    {% endif %}
{% endfor %}
<html lang="{{ html_lang }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{page.title}} | {{site.name}}</title>

    <!-- PWA Support -->
    <link rel="manifest" href="{{site.baseurl}}/manifest.json">
    <meta name="theme-color" content="#03a87c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Just Jason">

    {% seo %}

    <!-- Additional meta tags for enhanced SEO & GEO -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

    <!-- GEO: AI Search Engine Optimization -->
    <meta name="ai-content-declaration" content="This content is authored by a human expert with AI assistance for editing">

    <!-- hreflang for international SEO -->
    <link rel="alternate" hreflang="x-default" href="{{ site.url }}{{ page.url }}">
    <link rel="alternate" hreflang="zh-CN" href="{{ site.url }}{{ page.url }}">
    {% for lang in site.languages %}
    {% assign lang_hreflang = lang %}
    {% if lang == "zh-hans" %}{% assign lang_hreflang = "zh-CN" %}{% endif %}
    {% if lang == "zh-hant" %}{% assign lang_hreflang = "zh-TW" %}{% endif %}
    <link rel="alternate" hreflang="{{ lang_hreflang }}" href="{{ site.url }}{{ page.url }}{% if lang != site.default_lang %}?lang={{ lang }}{% endif %}">
    {% endfor %}

    <!-- Organization Schema for brand identity -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "@id": "{{ site.url }}/#organization",
      "name": "{{ site.name }}",
      "url": "{{ site.url }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ site.url }}/{{ site.logo }}",
        "width": 180,
        "height": 180
      },
      "image": "{{ site.url }}/{{ site.logo }}",
      "description": "{{ site.description | escape }}",
      "sameAs": [
        "https://x.com/{{ site.twitter.username }}",
        "https://github.com/junxinzhang"
      ],
      "founder": {
        "@type": "Person",
        "name": "Jason Zhang",
        "url": "{{ site.url }}/about.html"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "email": "{{ site.email }}",
        "contactType": "customer support"
      }
    }
    </script>

    <!-- Person Schema for author credibility (E-E-A-T) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "@id": "{{ site.url }}/about.html#person",
      "name": "Jason Zhang",
      "url": "{{ site.url }}/about.html",
      "image": "{{ site.url }}/assets/images/avatar1.jpg",
      "jobTitle": "AI 技术专家 & DevOps 架构师",
      "description": "10年+ 企业级软件架构师，专注 AI 私有化部署、DevOps、云原生架构。",
      "sameAs": [
        "https://x.com/Jasonz9788",
        "https://github.com/junxinzhang"
      ],
      "knowsAbout": [
        "Large Language Models",
        "AI Private Deployment",
        "DevOps",
        "Cloud Native Architecture",
        "Microservices"
      ],
      "worksFor": {
        "@type": "Organization",
        "@id": "{{ site.url }}/#organization"
      }
    }
    </script>

    <!-- Schema.org structured data for SEO & GEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "{% if page.layout == 'post' %}BlogPosting{% else %}WebSite{% endif %}",
      "name": "{{ site.name }}",
      "url": "{{ site.url }}{{ page.url }}",
      "inLanguage": "{{ html_lang }}",
      {% if page.layout == 'post' %}
      "headline": "{{ page.title | escape }}",
      "datePublished": "{{ page.date | date_to_xmlschema }}",
      "dateModified": "{% if page.last_modified_at %}{{ page.last_modified_at | date_to_xmlschema }}{% else %}{{ page.date | date_to_xmlschema }}{% endif %}",
      "author": {
        "@type": "Person",
        "name": "{{ site.authors[page.author].name | default: 'Jason Zhang' }}",
        "url": "{{ site.url }}/about.html",
        "jobTitle": "{{ site.authors[page.author].job_title | default: 'AI 技术专家 & DevOps 架构师' }}",
        "description": "{{ site.authors[page.author].bio | default: '专注于 AI 私有化部署、DevOps、云原生架构' }}"
      },
      "publisher": {
        "@type": "Organization",
        "name": "{{ site.name }}",
        "logo": {
          "@type": "ImageObject",
          "url": "{{ site.url }}/{{ site.logo }}"
        }
      },
      {% if page.image %}
      "image": "{% if page.image contains '://' %}{{ page.image }}{% else %}{{ site.url }}/{{ page.image }}{% endif %}",
      {% endif %}
      "description": "{% if page.description %}{{ page.description | escape }}{% else %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 | escape }}{% endif %}",
      "keywords": "{{ page.tags | join: ', ' }}",
      "articleSection": "{{ page.categories | first }}",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ site.url }}{{ page.url }}"
      },
      "speakable": {
        "@type": "SpeakableSpecification",
        "cssSelector": [".article-post h1", ".article-post h2", ".article-post p:first-of-type", ".article-post .lead"]
      },
      "isAccessibleForFree": true,
      "license": "https://creativecommons.org/licenses/by/4.0/"
      {% else %}
      "description": "{{ site.description | escape }}",
      "author": {
        "@type": "Person",
        "name": "Jason Zhang",
        "url": "{{ site.url }}/about.html"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "{{ site.url }}/?s={search_term_string}",
        "query-input": "required name=search_term_string"
      }
      {% endif %}
    }
    </script>

    <!-- BreadcrumbList Schema for better navigation in AI search -->
    {% if page.layout == 'post' %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "{{ site.name }}",
          "item": "{{ site.url }}"
        },
        {% if page.categories.size > 0 %}
        {
          "@type": "ListItem",
          "position": 2,
          "name": "{{ page.categories | first }}",
          "item": "{{ site.url }}/categories.html#{{ page.categories | first | downcase }}"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "{{ page.title | escape }}",
          "item": "{{ site.url }}{{ page.url }}"
        }
        {% else %}
        {
          "@type": "ListItem",
          "position": 2,
          "name": "{{ page.title | escape }}",
          "item": "{{ site.url }}{{ page.url }}"
        }
        {% endif %}
      ]
    }
    </script>
    {% endif %}

    <!-- FAQ Schema for GEO optimization -->
    {% if page.faq %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {% for item in page.faq %}
        {
          "@type": "Question",
          "name": "{{ item.question | escape }}",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "{{ item.answer | escape }}"
          }
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
    </script>
    {% endif %}

    <!-- HowTo Schema for tutorial/guide posts -->
    {% if page.howto %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "{{ page.howto.name | default: page.title | escape }}",
      "description": "{{ page.howto.description | default: page.description | escape }}",
      {% if page.howto.totalTime %}"totalTime": "{{ page.howto.totalTime }}",{% endif %}
      {% if page.image %}"image": "{% if page.image contains '://' %}{{ page.image }}{% else %}{{ site.url }}/{{ page.image }}{% endif %}",{% endif %}
      "step": [
        {% for step in page.howto.steps %}
        {
          "@type": "HowToStep",
          "position": {{ forloop.index }},
          "name": "{{ step.name | escape }}",
          "text": "{{ step.text | escape }}"
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
    </script>
    {% endif %}

    <link rel="shortcut icon" type="image/x-icon" href="{{site.baseurl}}/{{site.favicon}}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{site.baseurl}}/assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="{{site.baseurl}}/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="{{site.baseurl}}/assets/images/favicon/favicon-16x16.png">

    <!-- DNS Prefetch and Preconnect for third-party resources -->
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//www.google-analytics.com">
    <link rel="dns-prefetch" href="//www.googletagmanager.com">
    <link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>

    <!-- Critical CSS inline for faster FCP/LCP -->
    <style>
    :root{--blue:#7832e2;--primary:#03a87c;--light:#f8f9fa;--dark:#212529;--transition-duration:0.3s;--bg-color:#fff;--text-color:#212529;--text-muted:#6c757d;--card-bg:#fff;--border-color:#dee2e6;--shadow-color:rgba(0,0,0,0.1);--code-bg:#f8f9fa}
    [data-theme="dark"]{--bg-color:#0d1117;--text-color:#e6edf3;--text-muted:#8b949e;--card-bg:#161b22;--border-color:#30363d;--shadow-color:rgba(0,0,0,0.4);--code-bg:#161b22;--light:#161b22;--dark:#e6edf3}
    *,*::before,*::after{box-sizing:border-box}
    html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%}
    body{margin:0;font-family:"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:1rem;font-weight:400;line-height:1.6;color:var(--text-color);background-color:var(--bg-color);transition:background-color var(--transition-duration),color var(--transition-duration)}
    h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:700}
    p{margin-top:0;margin-bottom:1rem}
    a{color:#03a87c;text-decoration:none;background-color:transparent}
    a:hover{color:#026d50;text-decoration:underline}
    img{vertical-align:middle;border-style:none;max-width:100%;height:auto}
    .container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;max-width:1140px}
    .row{display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}
    .col-12{flex:0 0 100%;max-width:100%;position:relative;width:100%;padding-right:15px;padding-left:15px}
    .col-md-4{flex:0 0 33.333333%;max-width:33.333333%;position:relative;width:100%;padding-right:15px;padding-left:15px}
    .col-md-6{flex:0 0 50%;max-width:50%;position:relative;width:100%;padding-right:15px;padding-left:15px}
    .col-md-8{flex:0 0 66.666667%;max-width:66.666667%;position:relative;width:100%;padding-right:15px;padding-left:15px}
    @media(max-width:767.98px){.col-md-4,.col-md-6,.col-md-8{flex:0 0 100%;max-width:100%}}
    .d-flex{display:flex!important}
    .d-none{display:none!important}
    .d-block{display:block!important}
    @media(min-width:768px){.d-md-block{display:block!important}}
    .justify-content-between{justify-content:space-between!important}
    .align-items-center{align-items:center!important}
    .flex-column{flex-direction:column!important}
    .flex-grow-1{flex-grow:1!important}
    .mb-0{margin-bottom:0!important}
    .mb-4{margin-bottom:1.5rem!important}
    .mb-5{margin-bottom:3rem!important}
    .mt-2{margin-top:.5rem!important}
    .mt-3{margin-top:1rem!important}
    .mt-4{margin-top:1.5rem!important}
    .mt-auto{margin-top:auto!important}
    .ml-2{margin-left:.5rem!important}
    .mr-auto{margin-right:auto!important}
    .ml-auto{margin-left:auto!important}
    .p-3{padding:1rem!important}
    .text-dark{color:var(--text-color)!important}
    .text-white{color:#fff!important}
    .text-muted{color:var(--text-muted)!important}
    .text-left{text-align:left!important}
    .font-weight-bold{font-weight:700!important}
    .small{font-size:80%}
    .btn{display:inline-block;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;user-select:none;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s,background-color .15s,border-color .15s}
    .btn-primary{color:#fff;background-color:#03a87c;border-color:#03a87c}
    .btn-sm{padding:.25rem .5rem;font-size:.875rem}
    .btn-outline-primary{color:#03a87c;background-color:transparent;border-color:#03a87c}
    .card{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:var(--card-bg);background-clip:border-box;border:1px solid var(--border-color);border-radius:.25rem;overflow:hidden;transition:background-color var(--transition-duration),border-color var(--transition-duration)}
    .card-body{flex:1 1 auto;padding:1.25rem}
    .card-title{margin-bottom:.75rem}
    .card-text{margin-bottom:0}
    .card-img-top{width:100%;border-top-left-radius:calc(.25rem - 1px);border-top-right-radius:calc(.25rem - 1px)}
    .border-0{border:0!important}
    .rounded{border-radius:.25rem!important}
    .shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}
    .shadow-sm{box-shadow:0 .125rem .25rem rgba(0,0,0,.075)!important}
    .h-100{height:100%!important}
    .navbar{position:relative;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:.5rem 1rem}
    .navbar-brand{display:inline-block;padding-top:.3125rem;padding-bottom:.3125rem;margin-right:1rem;font-size:1.25rem;line-height:inherit;white-space:nowrap}
    .navbar-light .navbar-brand{color:rgba(0,0,0,.9)}
    .fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}
    .bg-white{background-color:#fff!important}
    .border-top{border-top:1px solid #dee2e6!important}
    .site-content{margin-top:35px;min-height:400px}
    .spanborder{border-bottom:1px solid #e8f3ec;margin-bottom:2rem}
    .spanborder span{border-bottom:2px solid #007bff;display:inline-block;padding-bottom:8px;margin-bottom:-1px}
    .hover-effect{transition:transform var(--transition-duration) ease,box-shadow var(--transition-duration) ease}
    .carousel{position:relative;border-radius:8px;overflow:hidden}
    .carousel-inner{position:relative;width:100%;overflow:hidden}
    .carousel-item{position:relative;display:none;float:left;width:100%;margin-right:-100%;backface-visibility:hidden;transition:transform .6s ease}
    .carousel-item.active{display:block}
    .carousel-caption{position:absolute;right:0;bottom:0;left:0;z-index:10;padding:20px 30px;color:#fff;text-align:left;background:linear-gradient(to top,rgba(0,0,0,.8) 0%,rgba(0,0,0,0) 100%)}
    .carousel-indicators{position:absolute;right:0;bottom:10px;left:0;z-index:15;display:flex;justify-content:center;padding-left:0;margin-right:15%;margin-left:15%;list-style:none}
    .carousel-indicators li{box-sizing:content-box;flex:0 1 auto;width:30px;height:3px;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#fff;background-clip:padding-box;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:.5;transition:opacity .6s ease}
    .carousel-indicators .active{opacity:1}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .skip-link{position:absolute;top:-40px;left:0;background:#03a87c;color:#fff;padding:8px 16px;z-index:9999;transition:top 0.3s;text-decoration:none;font-weight:600;border-radius:0 0 4px 0}
    .skip-link:focus{top:0;outline:2px solid #fff;outline-offset:2px}
    </style>

    <!-- Main CSS - Async load for non-blocking -->
    <link rel="preload" href="{{site.baseurl}}/assets/css/main.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{site.baseurl}}/assets/css/main.css"></noscript>

    <!-- Theme Stylesheet - Async load (minified) -->
    <link rel="preload" href="{{site.baseurl}}/assets/css/theme.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{site.baseurl}}/assets/css/theme.min.css"></noscript>

    <!-- Dark Mode Stylesheet - Async load -->
    <link rel="preload" href="{{site.baseurl}}/assets/css/dark-mode.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{site.baseurl}}/assets/css/dark-mode.css"></noscript>

    <!-- Font Awesome - Defer load until after page interactive -->
    <!-- Google Fonts removed - using system fonts for better performance -->

    <!-- Preload LCP image for faster load with high priority (WebP format) -->
    {% if page.url == "/" %}
    {% assign first_post = site.posts | first %}
    {% if first_post.image %}
    {% unless first_post.image contains '://' %}
    {% assign img_base = first_post.image | split: '.' | pop | join: '.' %}
    <link rel="preload" as="image" type="image/webp" fetchpriority="high" href="{{site.baseurl}}/{{ img_base }}.webp">
    {% else %}
    <link rel="preload" as="image" fetchpriority="high" href="{{ first_post.image }}">
    {% endunless %}
    {% endif %}
    {% elsif page.image %}
    {% unless page.image contains '://' %}
    {% assign img_base = page.image | split: '.' | pop | join: '.' %}
    <link rel="preload" as="image" type="image/webp" fetchpriority="high" href="{{site.baseurl}}/{{ img_base }}.webp">
    {% else %}
    <link rel="preload" as="image" fetchpriority="high" href="{{ page.image }}">
    {% endunless %}
    {% endif %}

    <!-- jQuery removed - using vanilla JS for better performance -->

    {% include tracking-header.html %}


</head>

<body class="{% if page.url == "/" %} homefirstpage {% endif %}">

    <!-- Skip to Main Content Link for Accessibility -->
    <a href="#main-content" class="skip-link" data-i18n="accessibility.skip_to_content">Skip to main content</a>

    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a href="{{site.baseurl}}/" aria-label="Home">
            <img src="{{site.baseurl}}/assets/images/favicon/apple-touch-icon.png" alt="{{site.name}} Logo" width="28" height="28" style="margin-right: 0.55rem;" loading="eager" decoding="async">
        </a>
        <a class="navbar-brand" href="{{site.baseurl}}/"><strong>{{site.name}}</strong></a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02" style="">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               {% include menu-header.html %}
            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                {% include search-lunr.html %}
                <!-- Dark Mode Toggle -->
                <li class="nav-item ml-2">
                    <button id="themeToggle" class="btn btn-link nav-link p-1" aria-label="Toggle dark mode" title="Toggle dark mode">
                        <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" style="display:none">
                            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
                        </svg>
                        <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
                        </svg>
                    </button>
                </li>
                {% include language-switcher.html %}
            </ul>
        </div>
    </div>
    </nav>

    <!-- Search Results -->
    <div id="lunrsearchresults">
        <ul class="mb-0"></ul>
    </div>

    <!-- Content -->
    <main id="main-content" role="main" class="site-content">
        {{ content }}
    </main>


    <!-- Theme JS (minified) -->
    <script defer src="{{site.baseurl}}/assets/js/theme.min.js"></script>

    <!-- Service Worker Registration -->
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js').then(function(reg) {
                console.log('SW registered:', reg.scope);
            }).catch(function(err) {
                console.log('SW registration failed:', err);
            });
        });
    }
    </script>


    <!-- Footer -->
    <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <span><strong>Just Jason</strong></span>
                <span>Copyright © <span id="copyright-year">2025</span>.</span>

                <!--  Github Repo Star Btn-->
                <a class="text-dark ml-1" target="_blank" href="https://github.com/junxinzhang/junxinzhang.github.io/discussions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="vertical-align:-2px"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg> Discussions on Github</a>

            </div>
            <div>
                Made with <a target="_blank" class="text-dark font-weight-bold" href="https://www.wowthemes.net/mundana-jekyll-theme/"> Mundana Jekyll Theme </a> by <a class="text-dark" target="_blank" href="https://www.wowthemes.net">WowThemes</a>.
            </div>
        </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <a href="#" id="backToTop" class="back-to-top" title="{{ t.misc.back_to_top | default: 'Back to Top' }}" aria-label="Back to Top">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/></svg>
    </a>

    <style>
    .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 45px;
        height: 45px;
        background-color: #007bff;
        color: #fff;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        opacity: 0;
        visibility: hidden;
        transition: all var(--transition-duration, 0.3s) ease;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    .back-to-top:hover {
        background-color: #0056b3;
        color: #fff;
        transform: translateY(-3px);
    }
    .back-to-top.visible {
        opacity: 1;
        visibility: visible;
    }
    </style>

    <script>
    // Dark Mode Toggle - Load early to prevent flash
    (function() {
        var savedTheme = localStorage.getItem('theme');
        var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        var theme = savedTheme || (prefersDark ? 'dark' : 'light');
        if (theme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
    })();

    // Update copyright year (non-blocking)
    var yearEl = document.getElementById('copyright-year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // Back to Top Button - Deferred initialization to reduce TBT
    function initBackToTop() {
        var backToTop = document.getElementById('backToTop');
        if (!backToTop) return;

        var scrollThrottle = false;
        window.addEventListener('scroll', function() {
            if (scrollThrottle) return;
            scrollThrottle = true;
            requestAnimationFrame(function() {
                if (window.scrollY > 300) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
                scrollThrottle = false;
            });
        }, {passive: true});

        backToTop.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({top: 0, behavior: 'smooth'});
        });
    }
    // Defer back-to-top init to reduce main thread blocking
    if ('requestIdleCallback' in window) {
        requestIdleCallback(initBackToTop, {timeout: 2000});
    } else {
        setTimeout(initBackToTop, 100);
    }

    // Lazy Loading for Images with background-image - Deferred to reduce TBT
    function initLazyLoading() {
        if ('IntersectionObserver' in window) {
            var lazyImageObserver = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) {
                        var lazyImage = entry.target;
                        var bgImage = lazyImage.getAttribute('data-bg');
                        if (bgImage) {
                            lazyImage.style.backgroundImage = 'url(' + bgImage + ')';
                            lazyImage.classList.add('lazy-loaded');
                        }
                        lazyImageObserver.unobserve(lazyImage);
                    }
                });
            }, {rootMargin: '100px 0px'});
            document.querySelectorAll('.lazy-bg').forEach(function(img) {
                lazyImageObserver.observe(img);
            });
        } else {
            document.querySelectorAll('.lazy-bg').forEach(function(img) {
                var bgImage = img.getAttribute('data-bg');
                if (bgImage) img.style.backgroundImage = 'url(' + bgImage + ')';
            });
        }
    }
    // Defer lazy loading init
    if ('requestIdleCallback' in window) {
        requestIdleCallback(initLazyLoading, {timeout: 1000});
    } else {
        setTimeout(initLazyLoading, 50);
    }

    // Navbar Toggle - Pure vanilla JS (replaces Bootstrap JS)
    (function() {
        var toggler = document.querySelector('.navbar-toggler');
        var navCollapse = document.getElementById('navbarColor02');
        if (!toggler || !navCollapse) return;

        toggler.addEventListener('click', function() {
            var isExpanded = toggler.getAttribute('aria-expanded') === 'true';
            toggler.setAttribute('aria-expanded', !isExpanded);
            toggler.classList.toggle('collapsed');
            navCollapse.classList.toggle('show');
        });
    })();

    // Dark Mode Toggle Handler
    (function() {
        var themeToggle = document.getElementById('themeToggle');
        var sunIcon = document.getElementById('sunIcon');
        var moonIcon = document.getElementById('moonIcon');
        if (!themeToggle) return;

        function updateIcons(isDark) {
            if (isDark) {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            } else {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            }
        }

        // Initial icon state
        var currentTheme = document.documentElement.getAttribute('data-theme');
        updateIcons(currentTheme === 'dark');

        themeToggle.addEventListener('click', function() {
            var isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            if (isDark) {
                document.documentElement.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
                updateIcons(false);
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                updateIcons(true);
            }
        });

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
            if (!localStorage.getItem('theme')) {
                if (e.matches) {
                    document.documentElement.setAttribute('data-theme', 'dark');
                    updateIcons(true);
                } else {
                    document.documentElement.removeAttribute('data-theme');
                    updateIcons(false);
                }
            }
        });
    })();
    </script>

    <style>
    /* Navbar collapse transition - Critical for FOUC prevention */
    .navbar-collapse{display:none}
    .navbar-collapse.show{display:block}
    @media(min-width:992px){.navbar-collapse{display:flex!important}}
    .lazy-bg{background-color:#f0f0f0;transition:opacity var(--transition-duration) ease}
    .lazy-bg.lazy-loaded{opacity:1}
    /* Critical dark mode variables - prevents flash */
    [data-theme="dark"]{--bg-color:#0d1117;--text-color:#e6edf3;--card-bg:#161b22;color-scheme:dark}
    [data-theme="dark"] body{background-color:var(--bg-color);color:var(--text-color)}
    [data-theme="dark"] .navbar-light{background-color:var(--card-bg)!important}
    </style>

    {% include tracking-footer.html %}

</body>

</html>
